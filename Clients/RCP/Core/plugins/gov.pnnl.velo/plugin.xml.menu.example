<!-- This file contains examples of adding command handlers with enablement and menu items to trigger commands.
Since each deployment wants to name and trigger commands differently, it's better for the deployments to register their own
UI menus.  The commands and default handler classes are defined by OASCIS, but it is up to the deployment's plugin to define the menu items and
command enablement. -->

<?xml version="1.0" encoding="UTF-8"?>
<?eclipse version="3.4"?>
<plugin>
   <extension-point id="toolUIFactory" name="Tool UI Factory" schema="schema/toolUIFactory.exsd"/>
   <extension-point id="toolRegistryProvider" name="Tool Registry Provider" schema="schema/toolRegistryProvider.exsd"/>
   <extension-point id="RegistryViewFolderProvider" name="Registry View Folder Provider" schema="schema/RegistryViewFolderProvider.exsd"/>
   <extension-point id="dataArchiver" name="Data Archiver" schema="schema/dataArchiver.exsd"/>
   <extension-point id="gov.pnnl.velo.wikibrowser.homepage" name="Wiki Homepage URL"  schema="schema/gov.pnnl.velo.wikibrowser.homepage.exsd"/>
   <extension
         point="org.eclipse.ui.commands">
      <command
            id="gov.pnnl.velo.ui.commands.CreateFolder"
            name="Create Folder">
      </command>
      <command
            id="gov.pnnl.velo.ui.commands.ImportFiles"
            name="Import Files">
      </command>
      <command
            id="gov.pnnl.velo.ui.commands.RegisterDataSet"
            name="Register Data Set">
      </command>
      <command
            id="gov.pnnl.velo.ui.commands.RegisterTool"
            name="Register Tool">
      </command>
      <command
            id="gov.pnnl.velo.ui.commands.RegisterMachine"
            name="Register Machine">
      </command>
      <command
            id="gov.pnnl.velo.ui.commands.CreateSimulation"
            name="Create Simulation">
      </command>
      <command
            id="gov.pnnl.velo.ui.commands.LaunchSimulation"
            name="Setup Tool Parameters">
      </command>
      <command
            id="gov.pnnl.velo.ui.commands.EditOascisObjectCommand"
            name="Edit">
      </command>
      <command
            id="gov.pnnl.velo.ui.commands.Reconnect"
            name="Reconnect">
      </command>
      <command
            id="gov.pnnl.velo.ui.commands.Tail"
            name="Tail -f">
      </command>
      <command
            id="gov.pnnl.velo.ui.commands.Shell"
            name="Shell">
      </command>
      <command
            id="gov.pnnl.velo.ui.commands.Terminate"
            name="Terminate">
      </command>
      <command
            id="gov.pnnl.velo.ui.commands.RegisterWorkflow"
            name="Register Workflow">
      </command>
      <command
            id="gov.pnnl.velo.ui.commands.RegisterModel"
            name="Register Model">
      </command>
      <command
            id="gov.pnnl.velo.ui.commands.RegisterScript"
            name="Register Script">
      </command>
   </extension>
   <extension
         point="gov.pnnl.cat.ui.resourceImage">
         
      <resourceImageFactory
            class="gov.pnnl.velo.ui.images.ToolsImageFactory">
      </resourceImageFactory>      
      <resourceImageFactory
            class="gov.pnnl.velo.ui.images.SimulationInstanceImageFactory">
      </resourceImageFactory>
      <resourceImageFactory
            class="gov.pnnl.velo.ui.images.DataSetImageFactory">
      </resourceImageFactory>
      <resourceImageFactory
            class="gov.pnnl.velo.ui.images.MachinesImageFactory">
      </resourceImageFactory>
      <resourceImageFactory
            class="gov.pnnl.velo.ui.images.DataSetContainerImageFactory">
      </resourceImageFactory>
      <resourceImageFactory
            class="gov.pnnl.velo.ui.images.DataSetsImageFactory">
      </resourceImageFactory>                 
      <resourceImageFactory
            class="gov.pnnl.velo.ui.images.ToolImageFactory">
      </resourceImageFactory>
      <resourceImageFactory
            class="gov.pnnl.velo.ui.images.SimulationImageFactory">
      </resourceImageFactory>
      <resourceImageFactory
            class="gov.pnnl.velo.ui.images.ModelsImageFactory">
      </resourceImageFactory>      
      <resourceImageFactory
            class="gov.pnnl.velo.ui.images.PEImageFactory">
      </resourceImageFactory>
      <resourceImageFactory
            class="gov.pnnl.velo.ui.images.SAImageFactory">
      </resourceImageFactory>
      <resourceImageFactory
            class="gov.pnnl.velo.ui.images.SRImageFactory">
      </resourceImageFactory>
      <resourceImageFactory
            class="gov.pnnl.velo.ui.images.UQImageFactory">
      </resourceImageFactory>
      <resourceImageFactory
            class="gov.pnnl.velo.ui.images.MachineImageFactory">
      </resourceImageFactory>
      <resourceImageFactory
            class="gov.pnnl.velo.ui.images.ToolContainerImageFactory">
      </resourceImageFactory>
   </extension>
      <extension
         point="org.eclipse.ui.decorators">
      <decorator
            icon="icons/8x8/error.png"
            id="gov.pnnl.velo.decorators.error"
            label="Job Error"
            lightweight="true"
            location="TOP_RIGHT"
            state="true">
         <enablement>
            <objectState
                  name="{http://www.pnl.gov/velo/model/content/1.0}status"
                  value="Error"/>
         </enablement>
      </decorator>
      <decorator
            icon="icons/8x8/paused.png"
            id="gov.pnnl.velo.decorators.killed"
            label="Job Killed"
            lightweight="true"
            location="TOP_RIGHT"
            state="true">
         <enablement>
            <objectState
                  name="{http://www.pnl.gov/velo/model/content/1.0}status"
                  value="Killed"/>
         </enablement>
      </decorator>
      <decorator
            icon="icons/8x8/media_play_green.gif"
            id="gov.pnnl.velo.decorators.running"
            label="Job Running"
            lightweight="true"
            location="TOP_RIGHT"
            state="true">
         <enablement>
            <objectState
                  name="{http://www.pnl.gov/velo/model/content/1.0}status"
                  value="Running"/>
         </enablement>
      </decorator>
      <decorator
            icon="icons/8x8/media_play_green.gif"
            id="gov.pnnl.velo.decorators.submitting"
            label="Job Submitting"
            lightweight="true"
            location="TOP_RIGHT"
            state="true">
         <enablement>
            <objectState
                  name="{http://www.pnl.gov/velo/model/content/1.0}status"
                  value="Submitting"/>
         </enablement>
      </decorator>
      <decorator
            icon="icons/8x8/media_play_green.gif"
            id="gov.pnnl.velo.decorators.inqueue"
            label="Job In Queue"
            lightweight="true"
            location="TOP_RIGHT"
            state="true">
         <enablement>
            <objectState
                  name="{http://www.pnl.gov/velo/model/content/1.0}status"
                  value="In Queue"/>
         </enablement>
      </decorator>
      <decorator
            icon="icons/8x8/pin_yellow.gif"
            id="gov.pnnl.velo.decorators.complete"
            label="Job Complete"
            lightweight="true"
            location="TOP_RIGHT"
            state="true">
         <enablement>
            <objectState
                  name="{http://www.pnl.gov/velo/model/content/1.0}status"
                  value="Complete"/>
         </enablement>
      </decorator>
      <decorator
            icon="icons/8x8/check.png"
            id="gov.pnnl.velo.decorators.success"
            label="Job Success"
            lightweight="true"
            location="TOP_RIGHT"
            state="true">
         <enablement>
            <objectState
                  name="{http://www.pnl.gov/velo/model/content/1.0}status"
                  value="Success"/>
         </enablement>
      </decorator>
      <decorator
      		adaptable="true"
            lightweight="true"
            location="TOP_RIGHT"
            state="true"
            icon="icons/8x8/world_link.png"
            id="gov.pnnl.velo.decorators.remotelink"
            label="Remote Link">
         <enablement>
            <objectState
                  name="aspect"
                  value="{http://www.pnl.gov/cat/model/content/1.0}remoteLink">
            </objectState>
         </enablement>
      </decorator>
   </extension>
   <extension
         point="org.eclipse.ui.menus">
      <menuContribution
            locationURI="menu:file?after=new.ext">
         <command
               commandId="gov.pnnl.velo.ui.commands.CreateFolder"
               icon="icons/16x16/folder_add.png"
               label="New Folder"
               style="push"
               tooltip="New Folder">
         </command>                   
      </menuContribution>
      <menuContribution
            locationURI="menu:org.eclipse.ui.main.menu?after=additions">
         <menu
               id="gov.pnnl.velo.menu.tools"
               label="Tools">
            <separator
                  name="additions">
            </separator>
         </menu>
      </menuContribution>  
      <menuContribution
            locationURI="menu:gov.pnnl.velo.menu.tools?after=additions">
         <menu
               id="gov.pnnl.velo.menu.tools.registry"
               label="Registry">
            <separator
                  name="additions">
            </separator>
         </menu>
         <menu
               id="gov.pnnl.velo.menu.tools.simulation"
               label="Simulation">
            <separator
                  name="additions">
            </separator>
         </menu>
      </menuContribution>  
      <menuContribution
            locationURI="menu:org.eclipse.ui.main.menu?after=additions">
         <menu
               id="gov.pnnl.velo.menu.jobs"
               label="Job Control">
            <separator
                  name="additions">
            </separator>
         </menu>
      </menuContribution>    
      <menuContribution
            locationURI="menu:file?after=import.ext">
         <command
               commandId="gov.pnnl.velo.ui.commands.ImportFiles"
               icon="icons/16x16/folder_into.png"
               label="Import Files"
               style="push"
               tooltip="Import Files">
         </command>
      </menuContribution>                 
      <menuContribution
            locationURI="toolbar:org.eclipse.ui.main.toolbar?after=additions">
         <toolbar
               id="gov.pnnl.velo.toolbar"
               label="OASCIS">
            <separator
                  name="gov.pnnl.velo.newExtensions"
                  visible="true">
            </separator>
            <separator
                  name="gov.pnnl.velo.toolExtensions"
                  visible="true">
            </separator>
            <separator
                  name="gov.pnnl.velo.runExtensions"
                  visible="true">
            </separator>
         </toolbar>
      </menuContribution> 
      <menuContribution
            locationURI="toolbar:gov.pnnl.velo.toolbar?after=gov.pnnl.velo.newExtensions">
            <command
                  commandId="gov.pnnl.velo.ui.commands.CreateFolder"
                  icon="icons/16x16/folder_add.png"
                  label="New Folder"
                  mode="FORCE_TEXT"
                  style="push"
                  tooltip="New Folder">
               <visibleWhen
                     checkEnabled="true">
               </visibleWhen>
            </command>
            <command
                  commandId="gov.pnnl.velo.ui.commands.CreateSimulation"
                  icon="icons/16x16/gear.png"
                  label="New Workflow Instance"
                  mode="FORCE_TEXT"
                  style="push"
                  tooltip="Create a new Workflow Instance">
               <visibleWhen
                     checkEnabled="true">
               </visibleWhen>
            </command>
            <command
                  commandId="gov.pnnl.velo.ui.commands.RegisterDataSet"
                  icon="icons/16x16/database.png"
                  label="New Dataset"
                  mode="FORCE_TEXT"
                  style="push"
                  tooltip="Register a new Data Set">
               <visibleWhen
                     checkEnabled="true">
               </visibleWhen>
            </command>
            <command
                  commandId="gov.pnnl.velo.ui.commands.RegisterMachine"
                  icon="icons/16x16/server.png"
                  label="New Machine"
                  mode="FORCE_TEXT"
                  style="push"
                  tooltip="Register a new Machine">
               <visibleWhen
                     checkEnabled="true">
               </visibleWhen>
            </command>
            <command
                  commandId="gov.pnnl.velo.ui.commands.RegisterWorkflow"
                  icon="icons/16x16/chart_organisation.png"
                  label="New Workflow"
                  mode="FORCE_TEXT"
                  style="push"
                  tooltip="Register a new Workflow">
               <visibleWhen
                     checkEnabled="true">
               </visibleWhen>
            </command>
            <command
                  commandId="gov.pnnl.velo.ui.commands.RegisterModel"
                  icon="icons/16x16/map.png"
                  label="New Model"
                  mode="FORCE_TEXT"
                  style="push"
                  tooltip="Register a new Model">
               <visibleWhen
                     checkEnabled="true">
               </visibleWhen>
            </command>
            <command
                  commandId="gov.pnnl.velo.ui.commands.RegisterScript"
                  icon="icons/16x16/notebook.png"
                  label="New Script"
                  mode="FORCE_TEXT"
                  style="push"
                  tooltip="Register a new Script">
               <visibleWhen
                     checkEnabled="true">
               </visibleWhen>
            </command>                                         
      </menuContribution>
      <menuContribution
            locationURI="toolbar:gov.pnnl.velo.toolbar?after=gov.pnnl.velo.toolExtensions">
            <command
                  commandId="gov.pnnl.velo.ui.commands.LaunchSimulation"
                  icon="icons/16x16/table_gear.png"
                  label="Open Run Setup" 
                  mode="FORCE_TEXT"
                  style="push"
                  tooltip="Setup Parameters and Launch Tool">
               <visibleWhen
                     checkEnabled="true">
               </visibleWhen>
            </command>
      </menuContribution>      
      <menuContribution
            locationURI="menu:gov.pnnl.velo.ui.views.RegistryView?after=additions">  
         <command
                  commandId="gov.pnnl.velo.ui.commands.RegisterDataSet"
                  icon="icons/16x16/database.png"
                  label="Register Data Set"
                  style="push"
                  tooltip="Register Data Set">
            </command>
            <command
                  commandId="gov.pnnl.velo.ui.commands.RegisterMachine"
                  icon="icons/16x16/server.png"
                  label="Register Machine"
                  style="push"
                  tooltip="Register Machine">
            </command>
            <command
                  commandId="gov.pnnl.velo.ui.commands.RegisterTool"
                  icon="icons/16x16/chart_organisation.png"
                  label="Register Tool"
                  style="push"
                  tooltip="Register Tool">
            </command>
      </menuContribution>
      <menuContribution
            locationURI="menu:gov.pnnl.velo.ui.views.MyWorkspaceView?after=additions">  
         <command
                  commandId="gov.pnnl.velo.ui.commands.CreateSimulation"
                  icon="icons/16x16/gear.png"
                  label="Create Simulation"
                  style="push"
                  tooltip="Create a new Simulation">
            </command>
      </menuContribution>
      <menuContribution
            locationURI="menu:gov.pnnl.velo.menu.tools.simulation?after=additions">
            <command
                  commandId="gov.pnnl.velo.ui.commands.LaunchSimulation"
                  icon="icons/16x16/table_gear.png"
                  label="Launch"
                  style="push"
                  tooltip="Setup Parameters and Launch Simulation">
            </command>
      </menuContribution>           
      <menuContribution
            locationURI="menu:gov.pnnl.velo.menu.jobs?after=additions">  
         <command
               commandId="gov.pnnl.velo.ui.commands.Reconnect"
               icon="icons/16x16/gear_connection.png"
               label="Reconnect"
               style="push"
               tooltip="Reconnect">
         </command>
         <command
               commandId="gov.pnnl.velo.ui.commands.Terminate"
               icon="icons/16x16/gear_stop.png"
               label="Terminate"
               style="push"
               tooltip="Terminate">
         </command>
         <command
               commandId="gov.pnnl.velo.ui.commands.Tail"
               icon="icons/16x16/gear_information.png"
               label="Tail -f"
               style="push"
               tooltip="Tail -f">
         </command>
         <command
               commandId="gov.pnnl.velo.ui.commands.Shell"
               icon="icons/16x16/terminal.png"
               label="Shell"
               mode="FORCE_TEXT"
               style="push"
               tooltip="Shell">
         </command>    
      </menuContribution>                         
      <menuContribution
            locationURI="toolbar:gov.pnnl.velo.toolbar?after=gov.pnnl.velo.runExtensions">
         <command
               commandId="gov.pnnl.velo.ui.commands.Reconnect"
               icon="icons/16x16/gear_connection.png"
               label="Reconnect"
               mode="FORCE_TEXT"
               style="push"
               tooltip="Reconnect">
            <visibleWhen
                  checkEnabled="true">
            </visibleWhen>
         </command>
         <command
               commandId="gov.pnnl.velo.ui.commands.Terminate"
               icon="icons/16x16/gear_stop.png"
               label="Terminate"
               mode="FORCE_TEXT"
               style="push"
               tooltip="Terminate">
            <visibleWhen
                  checkEnabled="true">
            </visibleWhen>
         </command>
         <command
               commandId="gov.pnnl.velo.ui.commands.Tail"
               icon="icons/16x16/gear_information.png"
               label="Tail -f"
               mode="FORCE_TEXT"
               style="push"
               tooltip="Tail -f">
            <visibleWhen
                  checkEnabled="true">
            </visibleWhen>
         </command>
         <command
               commandId="gov.pnnl.velo.ui.commands.Shell"
               icon="icons/16x16/terminal.png"
               label="Shell"
               style="push">
            <visibleWhen
                  checkEnabled="true">
            </visibleWhen>
         </command>
      </menuContribution> 
      <menuContribution
         locationURI="popup:org.eclipse.ui.popup.any?after=openIn">
      		<command
                  commandId="gov.pnnl.velo.ui.commands.EditOascisObjectCommand"
                  icon="icons/16x16/window_edit.png"
                  label="Edit"
                  mode="FORCE_TEXT"
                  style="push"
                  tooltip="Edit">
               <visibleWhen
                     checkEnabled="true">
               </visibleWhen>
            </command>
   </menuContribution>     
   </extension>
   <extension
         point="org.eclipse.core.expressions.propertyTesters">
      <propertyTester
            class="gov.pnnl.velo.ui.expressions.HasMimetypePropertyTester"
            id="gov.pnnl.velo.ui.hasMimetype"
            namespace="gov.pnnl.velo.ui"
            properties="hasMimetype"
            type="org.eclipse.jface.viewers.ISelection">
      </propertyTester>
      <propertyTester
            class="gov.pnnl.velo.ui.expressions.HasAspectPropertyTester"
            id="gov.pnnl.velo.ui.hasAspect"
            namespace="gov.pnnl.velo.ui"
            properties="hasAspect"
            type="org.eclipse.jface.viewers.ISelection">
      </propertyTester>
      <propertyTester
            class="gov.pnnl.velo.ui.expressions.HasModelSetupPropertyTester"
            id="gov.pnnl.velo.ui.hasModelSetup"
            namespace="gov.pnnl.velo.ui"
            properties="hasModelSetup"
            type="org.eclipse.jface.viewers.ISelection">
      </propertyTester>
      <propertyTester
            class="gov.pnnl.velo.ui.expressions.IsReadyPropertyTester"
            id="gov.pnnl.velo.ui.isReady"
            namespace="gov.pnnl.velo.ui"
            properties="isReady"
            type="org.eclipse.jface.viewers.ISelection">
      </propertyTester>
      <propertyTester
            class="gov.pnnl.velo.ui.expressions.StatusPropertyTester"
            id="gov.pnnl.velo.ui.status"
            namespace="gov.pnnl.velo.ui"
            properties="status"
            type="org.eclipse.jface.viewers.ISelection">
      </propertyTester>
      <propertyTester
            class="gov.pnnl.velo.ui.expressions.IsFolderPropertyTester"
            id="gov.pnnl.velo.ui.isFolder"
            namespace="gov.pnnl.velo.ui"
            properties="isFolder"
            type="org.eclipse.jface.viewers.ISelection">
      </propertyTester>
      <propertyTester
            class="gov.pnnl.velo.ui.expressions.HasViewPropertyTester"
            id="gov.pnnl.velo.ui.hasView"
            namespace="gov.pnnl.velo.ui"
            properties="hasView"
            type="org.eclipse.jface.viewers.IStructuredSelection">
      </propertyTester>
   </extension>   
   <extension
         point="org.eclipse.ui.newWizards">
      <category
            id="gov.pnnl.velo.proven"
            name="iRESM">
      </category>
      <wizard
            category="gov.pnnl.velo.proven"
            class="gov.pnnl.velo.ui.wizards.ToolWizard"
            icon="icons/16x16/chart_organisation.png"
            id="gov.pnnl.velo.ui.wizards.ToolWizard"
            name="Tool Registration">
      </wizard>
      <wizard
            category="gov.pnnl.velo.proven"
            class="gov.pnnl.velo.ui.wizards.ModelWizard"
            icon="icons/16x16/map.png"
            id="gov.pnnl.velo.ui.wizards.ModelWizard"
            name="Model Registration">
      </wizard>
      <wizard
            category="gov.pnnl.velo.proven"
            class="gov.pnnl.velo.ui.wizards.DatasetWizard"
            icon="icons/16x16/server_database.png"
            id="gov.pnnl.velo.ui.wizards.DatasetWizard"
            name="Dataset Registration">
      </wizard>
      <wizard
            category="gov.pnnl.velo.proven"
            class="gov.pnnl.velo.ui.wizards.SimulationInstanceWizard"
            icon="icons/16x16/gear.png"
            id="gov.pnnl.velo.ui.wizards.SimulationInstanceWizard"
            name="Simulation Instance">
      </wizard>
      <wizard
            category="gov.pnnl.velo.proven"
            class="gov.pnnl.velo.ui.wizards.MachineWizard"
            finalPerspective="gov.pnnl.velo.proven"
            icon="icons/16x16/server.png"
            id="gov.pnnl.velo.ui.wizards.MachineWizard"
            name="Machine Registration">
      </wizard>
      <wizard
            category="gov.pnnl.velo.proven"
            class="gov.pnnl.velo.ui.wizards.ReRunSimulationInstanceWizard"
            icon="icons/16x16/gear.png"
            id="gov.pnnl.velo.ui.wizards.ReRunSimulationInstanceWizard"
            name="ReRun Simulation Instance">
      </wizard>      
   </extension>   
   <extension
         point="org.eclipse.ui.handlers">
      <handler
            class="gov.pnnl.velo.ui.commands.CreateFolder"
            commandId="gov.pnnl.velo.ui.commands.CreateFolder">
         <activeWhen>
            <with
                  variable="selection">
               <test
                     forcePluginActivation="true"
                     property="gov.pnnl.velo.ui.isFolder"
                     value="true">
               </test>
            </with>
         </activeWhen>
      </handler>
      <handler
            class="gov.pnnl.velo.ui.commands.ImportFiles"
            commandId="gov.pnnl.velo.ui.commands.ImportFiles">
         <activeWhen>
            <with
                  variable="selection">
               <test
                     forcePluginActivation="true"
                     property="gov.pnnl.velo.ui.isFolder"
                     value="true">
               </test>
            </with>
         </activeWhen>
      </handler>               
      <handler
            class="gov.pnnl.velo.ui.commands.Reconnect"
            commandId="gov.pnnl.velo.ui.commands.Reconnect">
         <activeWhen>
            <with
                  variable="selection">
               <and>
                 <iterate
                       ifEmpty="false"
                       operator="and">
                    <adapt
                          type="gov.pnnl.cat.core.resources.IResource">
                       <test
                             forcePluginActivation="true"
                             property="gov.pnnl.cat.ui.hasAspect"
                             args="{http://www.pnnl.gov/velo/model/registry/1.0}simulationInstance"
                             value="true">
                       </test>
                    </adapt>
                 </iterate>
                  <test
                      args="Killed"
                        forcePluginActivation="true"
                        property="gov.pnnl.velo.ui.status"
                        value="true">
                  </test>
               </and>
            </with>
         </activeWhen>            
      </handler>
      <handler
            class="gov.pnnl.velo.ui.commands.Terminate"
            commandId="gov.pnnl.velo.ui.commands.Terminate">
         <activeWhen>
            <with
                  variable="selection">
               <and>
                 <iterate
                       ifEmpty="false"
                       operator="and">
                    <adapt
                          type="gov.pnnl.cat.core.resources.IResource">
                       <test
                             forcePluginActivation="true"
                             property="gov.pnnl.cat.ui.hasAspect"
                             args="{http://www.pnnl.gov/velo/model/registry/1.0}simulationInstance"
                             value="true">
                       </test>
                    </adapt>
                 </iterate>
                  <test
                      args="Submitting,In Queue,Running"
                        forcePluginActivation="true"
                        property="gov.pnnl.velo.ui.status"
                        value="true">
                  </test>
               </and>
            </with>
         </activeWhen>            
      </handler>
      <handler
            class="gov.pnnl.velo.ui.commands.Tail"
            commandId="gov.pnnl.velo.ui.commands.Tail">
         <activeWhen>
            <with
                  variable="selection">
               <and>
                 <iterate
                       ifEmpty="false"
                       operator="and">
                    <adapt
                          type="gov.pnnl.cat.core.resources.IResource">
                       <test
                             forcePluginActivation="true"
                             property="gov.pnnl.cat.ui.hasAspect"
                             args="{http://www.pnnl.gov/velo/model/registry/1.0}simulationInstance"
                             value="true">
                       </test>
                    </adapt>
                 </iterate>
                  <test
                      args="Running"
                        forcePluginActivation="true"
                        property="gov.pnnl.velo.ui.status"
                        value="true">
                  </test>               
               </and>
            </with>
         </activeWhen>            
      </handler>
      <handler
            class="gov.pnnl.velo.ui.commands.Shell"
            commandId="gov.pnnl.velo.ui.commands.Shell">
         <activeWhen>
            <with
                  variable="selection">
               <and>
                 <iterate
                       ifEmpty="false"
                       operator="and">
                    <adapt
                          type="gov.pnnl.cat.core.resources.IResource">
                       <test
                             forcePluginActivation="true"
                             property="gov.pnnl.cat.ui.hasAspect"
                             args="{http://www.pnnl.gov/velo/model/registry/1.0}simulationInstance"
                             value="true">
                       </test>
                    </adapt>
                 </iterate>
                  <test
                      args="Running,Complete,Success,Error"
                        forcePluginActivation="true"
                        property="gov.pnnl.velo.ui.status"
                        value="true">
                  </test>
               </and>
            </with>
         </activeWhen>            
      </handler>
            <handler
            class="gov.pnnl.velo.ui.commands.EditOascisObjectCommand"
            commandId="gov.pnnl.velo.ui.commands.EditOascisObjectCommand">
         <activeWhen>
            <with
                  variable="selection">
               <or>
                  <test
                        args="{http://www.pnnl.gov/velo/model/registry/1.0}tool"
                        forcePluginActivation="true"
                        property="gov.pnnl.velo.ui.hasAspect"
                        value="true">
                  </test>
                  <test
                        args="{http://www.pnnl.gov/velo/model/registry/1.0}simulationInstance"
                        forcePluginActivation="true"
                        property="gov.pnnl.velo.ui.hasAspect"
                        value="true">
                  </test>
                  <test
                        args="{http://www.pnnl.gov/velo/model/registry/1.0}simulation"
                        forcePluginActivation="true"
                        property="gov.pnnl.velo.ui.hasAspect"
                        value="true">
                  </test>
                  <test
                        args="{http://www.pnnl.gov/velo/model/registry/1.0}dataSet"
                        forcePluginActivation="true"
                        property="gov.pnnl.velo.ui.hasAspect"
                        value="true">
                  </test>
                  <test
                        args="{http://www.pnnl.gov/velo/model/registry/1.0}machine"
                        forcePluginActivation="true"
                        property="gov.pnnl.velo.ui.hasAspect"
                        value="true">
                  </test>
               </or>
            </with>
         </activeWhen>
      </handler>   
      <handler
            class="gov.pnnl.velo.ui.commands.LaunchSimulation"
            commandId="gov.pnnl.velo.ui.commands.LaunchSimulation">
         <activeWhen>
            <with
                  variable="selection">
               <and>
                  <iterate
                        ifEmpty="false"
                        operator="and">
                     <adapt
                           type="gov.pnnl.cat.core.resources.IResource">
                        <test
                              args="{http://www.pnnl.gov/velo/model/registry/1.0}simulationInstance"
                              forcePluginActivation="true"
                              property="gov.pnnl.cat.ui.hasAspect"
                              value="true">
                        </test>
                     </adapt>
                  </iterate>
                  <test
                        forcePluginActivation="true"
                        property="gov.pnnl.velo.ui.status"
                        value="false">
                  </test>
               </and>
            </with>
         </activeWhen>       
      </handler>   
      <handler
            class="gov.pnnl.velo.ui.commands.RegisterDataSet"
            commandId="gov.pnnl.velo.ui.commands.RegisterDataSet">
         <activeWhen>
            <with
                  variable="selection">
               <and>
                  <test
                        args="Registry"
                        forcePluginActivation="true"
                        property="gov.pnnl.velo.ui.hasView"
                        value="true">
                  </test>
               </and>
            </with>
         </activeWhen>     
      </handler>   
      <handler
            class="gov.pnnl.velo.ui.commands.RegisterMachine"
            commandId="gov.pnnl.velo.ui.commands.RegisterMachine">
         <activeWhen>
            <with
                  variable="selection">
               <and>
                  <test
                        args="Registry"
                        forcePluginActivation="true"
                        property="gov.pnnl.velo.ui.hasView"
                        value="true">
                  </test>
               </and>
            </with>
         </activeWhen>     
      </handler>   
      <handler
            class="gov.pnnl.velo.ui.commands.RegisterTool"
            commandId="gov.pnnl.velo.ui.commands.RegisterTool">
         <activeWhen>
            <with
                  variable="selection">
               <and>
                  <test
                        args="cmsfile/tools"
                        forcePluginActivation="true"
                        property="gov.pnnl.velo.ui.hasMimetype"
                        value="true">
                  </test>
               </and>
            </with>
         </activeWhen>
         <!--activeWhen>
            <with
                  variable="selection">
               <or>
                  <test
                        args="cmsfile/tools"
                        forcePluginActivation="true"
                        property="gov.pnnl.velo.ui.hasMimetype"
                        value="true">
                  </test>
                  <test
                        args="cmsfile/models"
                        forcePluginActivation="true"
                        property="gov.pnnl.velo.ui.hasMimetype"
                        value="true">
                  </test>
               </or>
            </with>
         </activeWhen-->     
      </handler>
      <handler
            class="gov.pnnl.velo.ui.commands.CreateSimulation"
            commandId="gov.pnnl.velo.ui.commands.CreateSimulation">
         <activeWhen>
            <with
                  variable="selection">
               <and>
                  <test
                        args="My Workspace"
                        forcePluginActivation="true"
                        property="gov.pnnl.velo.ui.hasView"
                        value="true">
                  </test>
               </and>
            </with>
         </activeWhen>
      </handler>
      <handler
            class="gov.pnnl.velo.ui.commands.RegisterWorkflow"
            commandId="gov.pnnl.velo.ui.commands.RegisterWorkflow">
         <activeWhen>
            <with
                  variable="selection">
               <and>
                  <test
                        args="Registry"
                        forcePluginActivation="true"
                        property="gov.pnnl.velo.ui.hasView"
                        value="true">
                  </test>
               </and>
            </with>
         </activeWhen>
      </handler>
      <handler
            class="gov.pnnl.velo.ui.commands.RegisterModel"
            commandId="gov.pnnl.velo.ui.commands.RegisterModel">
         <activeWhen>
            <with
                  variable="selection">
               <and>
                  <test
                        args="Registry"
                        forcePluginActivation="true"
                        property="gov.pnnl.velo.ui.hasView"
                        value="true">
                  </test>
               </and>
            </with>
         </activeWhen>
      </handler>
      <handler
            class="gov.pnnl.velo.ui.commands.RegisterScript"
            commandId="gov.pnnl.velo.ui.commands.RegisterScript">
         <activeWhen>
            <with
                  variable="selection">
               <and>
                  <test
                        args="Registry"
                        forcePluginActivation="true"
                        property="gov.pnnl.velo.ui.hasView"
                        value="true">
                  </test>
               </and>
            </with>
         </activeWhen>
      </handler>   
   </extension>
   <extension
         point="org.eclipse.ui.views">
      <category
            id="gov.pnnl.velo.category"
            name="OASCIS">
      </category>
      <view
            category=" gov.pnnl.velo.category"
            class="gov.pnnl.velo.ui.views.SummaryView"
            icon="icons/16x16/view_detailed.png"
            id="gov.pnnl.velo.ui.views.SummaryView"
            name="Summary"
            restorable="true">
      </view>
      <view
            category="gov.pnnl.velo.category"
            class="gov.pnnl.velo.ui.views.MyWorkspaceView"
            icon="icons/16x16/folders.png"
            id="gov.pnnl.velo.ui.views.MyWorkspaceView"
            name="My Workspace"
            restorable="true">
      </view>
      <view
            class="gov.pnnl.velo.ui.views.RegistryView"
            icon="icons/16x16/registry.png"
            id="gov.pnnl.velo.ui.views.RegistryView"
            name="Registry"
            restorable="true">
      </view>
      <view
            class="gov.pnnl.velo.ui.views.WikiWebBrowserView"
            id="gov.pnnl.velo.ui.views.WikiWebBrowserView"
            name="WikiWebBrowserView"
            restorable="true">
      </view>
      <view
            category="gov.pnnl.velo.category"
            class="gov.pnnl.velo.ui.views.ScratchPadView"
            icon="icons/16x16/notebook.png"
            id="gov.pnnl.velo.ui.views.ScratchPadView"
            name="Scratch Pad"
            restorable="true">
      </view>
   </extension>
   <extension
         point="org.eclipse.core.runtime.adapters">
      <factory
            adaptableType="gov.pnnl.cat.core.resources.IResource"
            class="org.akuna.ui.adapters.WikiAdapterFactory">
         <adapter
               type="java.net.URL">
         </adapter>
      </factory>
      <factory
            adaptableType="gov.pnnl.cat.core.resources.CmsPath"
            class="org.akuna.ui.adapters.CmsPathAdapterFactory">
         <adapter
               type="gov.pnnl.cat.core.resources.CmsPathRenamePolicy">
         </adapter>
      </factory>
   </extension>

</plugin>
